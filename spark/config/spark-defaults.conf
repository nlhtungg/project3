# ================================================
# Spark - Delta Lake + Hive + MinIO configuration
# ================================================

spark.master=spark://spark-master:7077
spark.sql.catalogImplementation=hive
spark.sql.extensions=io.delta.sql.DeltaSparkSessionExtension
spark.sql.catalog.spark_catalog=org.apache.spark.sql.delta.catalog.DeltaCatalog

# Hive Metastore URI (trỏ đến container Hive)
spark.hadoop.hive.metastore.uris=thrift://hive-metastore:9083
spark.hadoop.hive.metastore.warehouse.dir=s3a://bronze/

# -----------------------------------------------
# S3 / MinIO
# -----------------------------------------------
spark.hadoop.fs.s3a.endpoint=http://minio:9000
spark.hadoop.fs.s3a.access.key=minioadmin
spark.hadoop.fs.s3a.secret.key=minioadmin
spark.hadoop.fs.s3a.path.style.access=true
spark.hadoop.fs.s3a.connection.ssl.enabled=false
spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem
spark.delta.logStore.class=org.apache.spark.sql.delta.storage.S3SingleDriverLogStore

# -----------------------------------------------
# Prometheus Metrics
# -----------------------------------------------
spark.ui.prometheus.enabled=true
spark.metrics.conf.*.sink.prometheusServlet.class=org.apache.spark.metrics.sink.PrometheusServlet
spark.metrics.conf.*.sink.prometheusServlet.path=/metrics/prometheus
spark.metrics.conf.master.sink.prometheusServlet.path=/metrics/master/prometheus
spark.metrics.conf.applications.sink.prometheusServlet.path=/metrics/applications/prometheus

# -----------------------------------------------
# Logging / misc
# -----------------------------------------------
spark.eventLog.enabled=false
spark.sql.warehouse.dir=s3a://bronze/
